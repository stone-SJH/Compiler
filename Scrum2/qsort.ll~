; ModuleID = 'qsort'
; target datalayout = " "
; target triple = " "

define void @_QuickSort(i32* %A, i32 %iLo, i32 %iHi) nounwind {
entry:
  %A.addr = alloca i32*, align 4
  %iLo.addr = alloca i32, align 4
  %iHi.addr = alloca i32, align 4
  store i32* %A, i32** %A.addr, align 4
  store i32 %iLo, i32* %iLo.addr, align 4
  store i32 %iHi, i32* %iHi.addr, align 4

  %Lo = alloca i32, align 4
  %Hi = alloca i32, align 4
  %Mid = alloca i32, align 4
  %0 = load i32* %iLo.addr
  %1 = load i32* %iHi.addr
  store i32 %0, i32* %Lo, align 4		;Lo = iLo
  store i32 %1, i32* %Hi, align 4		;Hi = iHi
  %2 = add nsw i32 %0, %1
  %3 = sdiv i32 %2, 2
  %4 = load i32** %A.addr 
  %5 = getelementptr inbounds i32* %4, i32 %3
  %6 = load i32* %5
  store i32 %6, i32* %Mid, align 4 		;Mid = A[(Lo + Hi) / 2]
  ret void
}  

define i32 @main() nounwind {
  %1 = alloca i32, align 4
  store i32 0, i32* %1
  %2 = load i32* %1 
  ret i32 %2
}
